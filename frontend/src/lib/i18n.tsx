import { createContext, useContext, useState, useCallback, type ReactNode } from 'react'

export type Lang = 'es' | 'en'

interface I18nCtx {
  lang: Lang
  setLang: (l: Lang) => void
  t: (key: string) => string
  ta: (key: string) => string[]
}

const Ctx = createContext<I18nCtx | null>(null)

/* ── Static strings ──────────────────────────────────────────── */
const S: Record<Lang, Record<string, string>> = {
  es: {
    // Nav
    'nav.overview': 'Overview',
    'nav.trading': 'Trading',
    'nav.cycles': 'Ciclos',
    'nav.technical': 'Tecnico',
    'nav.onchain': 'On-Chain',
    'nav.macro': 'Macro',
    'nav.sentiment': 'Sentimiento',
    'nav.cycleScore': 'Cycle Score',
    'nav.risk': 'Riesgo',
    'nav.alerts': 'Alertas',
    'nav.conclusions': 'Conclusiones',
    'nav.reports': 'Informes',

    // Common
    'common.noData': 'Sin datos disponibles',
    'common.error': 'Algo salio mal',
    'common.errorMsg': 'Ocurrio un error inesperado al renderizar esta pagina.',
    'common.tryAgain': 'Reintentar',
    'common.interpretation': 'Interpretacion',
    'common.days': 'dias',
    'common.ongoing': 'en curso',
    'common.activeAlerts': 'alertas activas',

    // Header
    'header.title': 'Centro de Inteligencia Bitcoin',
    'header.titleShort': 'BTC Intel',

    // Overview
    'overview.title': 'Overview',
    'overview.subtitle': 'BTC Intelligence Hub',
    'overview.helpTitle': 'Overview - Vista General',
    'overview.btcPrice': 'BTC Price',
    'overview.cycleScore': 'Cycle Score',
    'overview.fearGreed': 'Fear & Greed',
    'overview.alerts': 'Alertas',
    'overview.conclusions': 'Conclusiones',
    'overview.tradingSignal': 'Trading Signal',
    'overview.seeDetail': 'Ver detalle completo',
    'overview.extremeFear': 'Miedo Extremo',
    'overview.fear': 'Miedo',
    'overview.neutral': 'Neutral',
    'overview.greed': 'Codicia',
    'overview.extremeGreed': 'Codicia Extrema',

    // Phase labels
    'phase.capitulation': 'CAPITULACION',
    'phase.accumulation': 'ACUMULACION',
    'phase.early_bull': 'BULL TEMPRANO',
    'phase.mid_bull': 'BULL MEDIO',
    'phase.late_bull': 'BULL TARDIO',
    'phase.distribution': 'DISTRIBUCION',
    'phase.euphoria': 'EUFORIA',

    // Trading
    'trading.title': 'Trading Signal',
    'trading.subtitle': 'Recomendaciones por timeframe',
    'trading.currentPrice': 'Precio actual:',
    'trading.confidence': 'confianza',
    'trading.1H': 'Scalping / Intraday',
    'trading.4H': 'Intraday / Swing',
    'trading.1D': 'Swing / Position',
    'trading.1W': 'Position / Macro',
    'trading.bull': 'bull',
    'trading.bear': 'bear',
    'trading.flat': 'flat',
    'trading.activeSignals': 'Señales Activas',
    'trading.signals': 'señales:',
    'trading.bullish': 'alcistas',
    'trading.bearish': 'bajistas',
    'trading.neutral': 'neutral',
    'trading.operationLevels': 'Niveles de Operacion',
    'trading.calcBased': 'Calculo basado en:',
    'trading.slAdjusted': 'SL ajustado por confianza de la señal. Mayor confianza = SL mas ajustado.',
    'trading.thesis': 'Tesis de Entrada',
    'trading.why': '¿Por que',
    'trading.when': '¿Cuando entrar?',
    'trading.risks': 'Riesgos clave',
    'trading.reasoning': 'Razonamiento',
    'trading.indicator': 'Indicador',
    'trading.value': 'Valor',
    'trading.signal': 'Señal',
    'trading.weight': 'Peso',
    'trading.impact': 'Impacto',
    'trading.contrib': 'Contrib.',
    'trading.score': 'Score:',
    'trading.disclaimer': '* Los niveles TP/SL son orientativos, calculados con ATR y Bollinger Bands. No es consejo financiero. Gestiona tu riesgo.',

    // Trading thesis dynamic
    'trading.mixedSignals': 'El mercado muestra señales mixtas con',
    'trading.bullishIndicators': 'indicadores alcistas y',
    'trading.bearishIndicators': 'bajistas.',
    'trading.noClearBias': 'No hay sesgo claro suficiente para recomendar una direccion. Score final:',
    'trading.stayOut': 'Mantenerse al margen o esperar confirmacion antes de operar.',
    'trading.indicatorsAnalyzed': 'indicadores analizados:',
    'trading.mainSignal': 'Señal principal:',
    'trading.contributes': 'contribuye',
    'trading.toScore': 'al score.',
    'trading.rsiOversold': 'indica sobreventa — historicamente precede rebotes.',
    'trading.rsiOverbought': 'indica sobrecompra — historicamente precede correcciones.',
    'trading.priceAboveEma': 'sobre EMA 21',
    'trading.emaSupportActive': '— soporte dinamico activo a favor.',
    'trading.priceBelowEma': 'bajo EMA 21',
    'trading.emaResistance': '— la EMA actua como resistencia a superar.',
    'trading.emaResistanceBearish': '— resistencia dinamica confirmando presion bajista.',
    'trading.emaSupportBreak': '— soporte que debe romperse para confirmar el SHORT.',
    'trading.csAccumulation': '(acumulacion) — fase historicamente favorable para compras a medio-largo plazo.',
    'trading.csDistribution': '(distribucion) — fase avanzada del ciclo, cautela recomendada.',
    'trading.counterSignals': 'Señales en contra:',
    'trading.entryAggressive': 'Entrada al precio actual',
    'trading.highConfidence': '— confianza alta',
    'trading.signalClear': 'la señal es suficientemente clara.',
    'trading.entryModerate': 'Entrada moderada al precio actual',
    'trading.mediumConfidence': '— confianza media',
    'trading.reducedSize': 'considerar tamaño de posicion reducido.',
    'trading.weakSignal': 'Señal debil',
    'trading.waitConfirmation': '— esperar confirmacion adicional antes de entrar.',
    'trading.conservativeBreakAbove': 'Entrada conservadora: esperar que el precio supere EMA 21',
    'trading.asBullishConfirmation': 'como confirmacion alcista.',
    'trading.emaSupportNear': 'como soporte cercano — entrada favorable si mantiene este nivel.',
    'trading.conservativeBreakBelow': 'Entrada conservadora: esperar que el precio pierda EMA 21',
    'trading.asBearishConfirmation': 'como confirmacion bajista.',
    'trading.emaResistanceNear': 'como resistencia cercana — entrada favorable si la rechaza.',
    'trading.rsiExtremeOversold': 'RSI en zona extrema de sobreventa — entrada agresiva justificada por estadisticas de rebote.',
    'trading.rsiExtremeOverbought': 'RSI en zona extrema de sobrecompra — entrada short agresiva justificada.',
    'trading.slInvalidates': '— si pierde este nivel, la tesis se invalida.',
    'trading.fgExtremeFear': 'Fear & Greed en miedo extremo — puede haber mas caida antes del rebote (capitulacion).',
    'trading.fgExtremeGreed': 'Fear & Greed en codicia extrema — mercado vulnerable a correccion por exceso de optimismo.',
    'trading.hrDecline': 'Hash Rate en declive — los mineros pueden estar vendiendo, presion adicional bajista.',
    'trading.nvtHigh': 'NVT elevado — la red puede estar sobrevalorada respecto a su uso real.',
    'trading.lowConfidence': 'Confianza baja',
    'trading.ambiguousSignals': '— señales ambiguas, alto riesgo de falso positivo.',
    'trading.counterIndicators': 'indicadores en contra — posible divergencia, vigilar de cerca.',
    'trading.noRisks': 'Sin factores de riesgo destacables para esta señal.',

    // Signal explanations
    'sig.rsi.extremeBullish': 'sobreventa extrema, alta probabilidad de rebote',
    'sig.rsi.bullish': 'zona de sobreventa, momentum comprando',
    'sig.rsi.bearish': 'zona de sobrecompra, presion vendedora',
    'sig.rsi.extremeBearish': 'sobrecompra extrema, alto riesgo de correccion',
    'sig.rsi.neutral': 'zona neutral, sin sesgo claro',
    'sig.macd.bullish': 'histogram positivo, momentum alcista creciente',
    'sig.macd.bearish': 'histogram negativo, momentum bajista',
    'sig.macd.neutral': 'sin cruce claro, momentum plano',
    'sig.sma.bullish': 'media rapida sobre lenta (golden cross), tendencia alcista',
    'sig.sma.bearish': 'media rapida bajo lenta (death cross), tendencia bajista',
    'sig.sma.neutral': 'medias convergiendo, sin direccion clara',
    'sig.bb.bullish': 'precio cerca de banda inferior, posible rebote',
    'sig.bb.bearish': 'precio cerca de banda superior, posible rechazo',
    'sig.bb.neutral': 'precio centrado en las bandas',
    'sig.ema.extremeBullish': 'precio muy por encima, tendencia fuerte alcista',
    'sig.ema.bullish': 'precio sobre la EMA, soporte dinamico activo',
    'sig.ema.bearish': 'precio bajo la EMA, resistencia dinamica activa',
    'sig.ema.extremeBearish': 'precio muy por debajo, tendencia bajista fuerte',
    'sig.ema.neutral': 'precio pegado a la EMA, zona de decision',
    'sig.fg.extremeBullish': 'codicia extrema (contrarian: cautela)',
    'sig.fg.bullish': 'codicia moderada',
    'sig.fg.bearish': 'miedo (contrarian: oportunidad)',
    'sig.fg.extremeBearish': 'miedo extremo (contrarian: fuerte oportunidad de compra)',
    'sig.fg.neutral': 'sentimiento neutral',
    'sig.hr.bullish': 'mineros acumulando, red saludable',
    'sig.hr.bearish': 'mineros capitulando, posible presion de venta',
    'sig.hr.neutral': 'Hash Rate estable — sin cambios significativos en la red',
    'sig.nvt.bullish': 'red infravalorada respecto a transacciones',
    'sig.nvt.bearish': 'red sobrevalorada, posible burbuja',
    'sig.nvt.neutral': 'valoracion acorde al uso de red',
    'sig.cs.bullish': 'fase temprana del ciclo, alto potencial alcista',
    'sig.cs.bearish': 'fase avanzada del ciclo, riesgo creciente',
    'sig.cs.neutral': 'mitad del ciclo, equilibrio riesgo/recompensa',

    // Technical
    'technical.title': 'Technical Analysis',
    'technical.subtitle': 'Indicadores tecnicos y signals',
    'technical.helpTitle': 'Analisis Tecnico',
    'technical.priceMA': 'BTC Price + Medias Moviles',
    'technical.rsi': 'RSI (14)',
    'technical.macd': 'MACD (12, 26, 9)',
    'technical.macdLine': 'MACD',
    'technical.signalLine': 'Signal',
    'technical.histogram': 'Histogram',
    'technical.bullishCross': 'Cruce alcista',
    'technical.bearishCross': 'Cruce bajista',
    'technical.rsiOverbought': 'posible correccion a corto plazo',
    'technical.rsiOversold': 'posible rebote a corto plazo',
    'technical.rsiBullZone': 'momentum positivo',
    'technical.rsiBearZone': 'momentum debil',
    'technical.macdPosBullish': 'momentum alcista',
    'technical.macdNegBearish': 'momentum bajista',
    'technical.lastMacdCross': 'Ultimo cruce MACD:',
    'technical.bullishMacdCross': 'alcista (MACD cruza por encima de signal)',
    'technical.bearishMacdCross': 'bajista (MACD cruza por debajo de signal)',
    'technical.priceNearEma': 'posible soporte/resistencia dinamica',
    'technical.priceAboveEma': 'por encima de EMA 21',
    'technical.priceBelowEma': 'por debajo de EMA 21',
    'technical.smaAbove': 'por encima de SMA 200',
    'technical.smaBelow': 'por debajo de SMA 200',
    'technical.structureBullish': 'estructura alcista',
    'technical.structureBearish': 'estructura bajista',
    'technical.goldenCross': 'Golden Cross activo (SMA50 > SMA200): tendencia alcista de largo plazo',
    'technical.deathCross': 'Death Cross activo (SMA50 < SMA200): tendencia bajista de largo plazo',
    'technical.smaConverging': 'SMAs convergiendo: posible cambio de tendencia',

    // Technical v2 — overlays & new sections
    'technical.overlays': 'Overlays',
    'technical.overlay.emas': 'EMAs/SMAs',
    'technical.overlay.bb': 'Bollinger',
    'technical.overlay.sr': 'S/R',
    'technical.overlay.fib': 'Fibonacci',
    'technical.overlay.patterns': 'Patrones',
    'technical.overlay.volume': 'Volumen',
    'technical.timeframe': 'Timeframe',
    'technical.range': 'Rango',
    'technical.candlestick': 'Grafico de Velas + Overlays',
    'technical.levelMap': 'Mapa de Niveles',
    'technical.resistances': 'RESISTENCIAS',
    'technical.supports': 'SOPORTES',
    'technical.currentPrice': 'PRECIO ACTUAL',
    'technical.levelScore': 'score',
    'technical.roleFlip': 'Role Flip',
    'technical.psychological': 'Psicologico',
    'technical.fibonacci': 'Fibonacci',
    'technical.highVolume': 'Alto Volumen',
    'technical.confluenceZones': 'Zonas de Confluencia',
    'technical.confluence.critical': 'ZONA CONFLUENCIA CRITICA',
    'technical.confluence.strong': 'ZONA CONFLUENCIA',
    'technical.confluence.support': 'SOPORTE',
    'technical.confluence.resistance': 'RESISTENCIA',
    'technical.confluence.below': 'debajo',
    'technical.confluence.above': 'arriba',
    'technical.confluence.timeframes': 'Timeframes',
    'technical.confluence.strength': 'Fuerza combinada',
    'technical.confluence.granNivel': 'Gran Nivel',
    'technical.confluence.noZones': 'No hay zonas de confluencia activas',
    'technical.returnHeatmap': 'Heatmap de Rendimiento Mensual',
    'technical.heatmap.year': 'Ano',
    'technical.heatmap.avg': 'Media',
    'technical.heatmap.noData': 'Sin datos',
    'technical.interpretation.levels': 'Niveles S/R',
    'technical.interpretation.fibonacci': 'Fibonacci',
    'technical.interpretation.confluence': 'Confluencia',
    'technical.interpretation.seasonality': 'Estacionalidad',
    'technical.interpretation.summary': 'Resumen',
    'technical.goldenPocket': 'Golden Pocket',
    'technical.noLevels': 'Sin niveles S/R activos',
    'technical.noFib': 'Sin datos Fibonacci',
    'technical.noConfluence': 'Sin zonas de confluencia',
    'technical.volumeSma': 'Vol SMA20',

    // Cycles
    'cycles.title': 'Cycle Analysis',
    'cycles.subtitle': 'Halvings, bull/bear markets',
    'cycles.helpTitle': 'Analisis de Ciclos',
    'cycles.halvingTimeline': 'Halving Timeline',
    'cycles.1st': '1er Halving',
    'cycles.2nd': '2do Halving',
    'cycles.3rd': '3er Halving',
    'cycles.4th': '4to Halving',
    'cycles.daySinceHalving': 'dia desde ultimo halving',
    'cycles.currentCycle': 'Ciclo Actual',
    'cycles.daysSinceHalving': 'Dias Desde Halving',
    'cycles.halvingCycles': 'Halving Cycles',
    'cycles.bullBear': 'Bull/Bear',
    'cycles.daysBetweenPeaks': 'Dias entre Techos de Ciclo',
    'cycles.daysBetweenBottoms': 'Dias entre Suelos de Ciclo',
    'cycles.daysPeakToBottom': 'Dias de Techo a Suelo (Caida)',
    'cycles.average': 'Promedio:',
    'cycles.projections': 'Proyecciones (basadas en promedios historicos)',
    'cycles.nextBottomFromPeak': 'Proximo Suelo (desde ultimo techo)',
    'cycles.nextBottomFromBottom': 'Proximo Suelo (desde ultimo suelo)',
    'cycles.nextPeakFromPeak': 'Proximo Techo (desde ultimo techo)',
    'cycles.projNote': '* Proyecciones basadas en promedios de ciclos anteriores. No es consejo financiero.',
    'cycles.allCycles': 'All Cycles',
    'cycles.name': 'Nombre',
    'cycles.type': 'Tipo',
    'cycles.start': 'Inicio',
    'cycles.end': 'Fin',
    'cycles.duration': 'Duracion',
    'cycles.roi': 'ROI',
    'cycles.maxDD': 'Max DD',

    // On-Chain
    'onchain.title': 'On-Chain Metrics',
    'onchain.subtitle': 'Hash rate, NVT, network health',
    'onchain.helpTitle': 'Metricas On-Chain',
    'onchain.hashRate': 'Hash Rate',
    'onchain.hrMomentum': 'HR Momentum 30D',
    'onchain.nvtRatio': 'NVT Ratio',
    'onchain.hrMomentumChart': 'Hash Rate Momentum 30D',
    'onchain.hrGrowing': 'Hash Rate creciendo: la red se fortalece, mineros optimistas',
    'onchain.hrDecreasing': 'Hash Rate descendiendo: posible estres en mineros',
    'onchain.nvtHigh': 'NVT alto (>65): red posiblemente sobrevalorada respecto a su uso real',
    'onchain.nvtLow': 'NVT bajo (<30): red infravalorada, buena relacion valor/uso',
    'onchain.nvtNormal': 'NVT en rango normal',
    'onchain.healthyNetwork': 'En conjunto, las metricas on-chain muestran una red saludable y en crecimiento',
    'onchain.weakNetwork': 'En conjunto, las metricas on-chain muestran senales de debilidad en la red',
    'onchain.mixedSignals': 'Las metricas on-chain muestran senales mixtas, sin tendencia clara',

    // Macro
    'macro.title': 'Macro Analysis',
    'macro.subtitle': 'BTC correlations with traditional assets',
    'macro.helpTitle': 'Analisis Macro',
    'macro.btcSpx': 'BTC vs SPX',
    'macro.btcGold': 'BTC vs GOLD',
    'macro.btcDxy': 'BTC vs DXY',
    'macro.btcUs10y': 'BTC vs US_10Y',
    'macro.strong': 'strong',
    'macro.weak': 'weak',
    'macro.correlationMatrix': 'Correlation Matrix (30D)',
    'macro.highCorrelationSpx': 'Alta correlacion con S&P500',
    'macro.btcRiskAsset': 'BTC se comporta como activo de riesgo',
    'macro.lowCorrelationSpx': 'Baja correlacion con S&P500: BTC actua independiente del mercado tradicional',
    'macro.negCorrelationDxy': 'Correlacion negativa con dolar',
    'macro.weakDollarFavorsBtc': 'la debilidad del dolar favorece a BTC',
    'macro.posCorrelationDxy': 'Correlacion positiva inusual con dolar: movimiento atipico',
    'macro.highCorrelationGold': 'Alta correlacion con oro: BTC actua como reserva de valor',
    'macro.noData': 'No hay suficientes datos macro para generar una interpretacion',
    'macro.favorable': 'Entorno macro favorable: BTC muestra independencia y/o actua como reserva de valor',
    'macro.unfavorable': 'Entorno macro desfavorable: correlaciones atipicas sugieren cautela',
    'macro.mixed': 'Entorno macro mixto: las correlaciones no muestran una tendencia dominante clara',

    // Sentiment
    'sentiment.title': 'Sentiment Analysis',
    'sentiment.subtitle': 'Fear & Greed Index',
    'sentiment.helpTitle': 'Analisis de Sentimiento',
    'sentiment.fearGreed': 'Fear & Greed',
    'sentiment.avg30d': '30D Average',
    'sentiment.zone': 'Zone',
    'sentiment.divergence': 'Divergence',
    'sentiment.vsAvg': 'vs 30D avg',
    'sentiment.history': 'Fear & Greed History',
    'sentiment.extremeFear': 'Extreme Fear',
    'sentiment.fear': 'Fear',
    'sentiment.neutral': 'Neutral',
    'sentiment.greed': 'Greed',
    'sentiment.extremeGreed': 'Extreme Greed',
    'sentiment.insightExtremeFear': 'Miedo Extremo: historicamente, las mejores oportunidades de compra ocurren en estos niveles',
    'sentiment.insightFear': 'Zona de Miedo: el mercado esta temeroso, posible oportunidad contrarian',
    'sentiment.insightExtremeGreed': 'Codicia Extrema: precaucion, el mercado esta euforico. Historicamente precede correcciones',
    'sentiment.insightGreed': 'Zona de Codicia: el optimismo es alto, considerar tomar beneficios parciales',
    'sentiment.insightNeutral': 'Sentimiento neutral: el mercado no muestra sesgo extremo',
    'sentiment.insightDivergence': 'Divergencia significativa entre sentimiento actual y media de 30 dias: posible cambio de tendencia',

    // CycleScore
    'cycleScore.title': 'Cycle Score',
    'cycleScore.subtitle': 'Composite indicator 0-100',
    'cycleScore.helpTitle': 'Cycle Score - Indicador de Ciclo',
    'cycleScore.score': 'Score',
    'cycleScore.phase': 'Phase',
    'cycleScore.components': 'Components',
    'cycleScore.activeInputs': 'active inputs',
    'cycleScore.date': 'Date',
    'cycleScore.componentBreakdown': 'Component Breakdown',
    'cycleScore.smaPosition': 'SMA Position',
    'cycleScore.pricePosition': 'Price Position',
    'cycleScore.halving': 'Halving',
    'cycleScore.rsiMonthly': 'RSI Monthly',
    'cycleScore.hashRateMom': 'Hash Rate Mom',
    'cycleScore.fearGreed': 'Fear & Greed',
    'cycleScore.fg30d': 'F&G 30D',
    'cycleScore.history': 'Score History (90d)',
    'cycleScore.capitulation': 'Score en zona de capitulacion',
    'cycleScore.capitulationDesc': 'historicamente la mejor zona de acumulacion a largo plazo',
    'cycleScore.accumulation': 'Zona de acumulacion',
    'cycleScore.accumulationDesc': 'riesgo bajo, buen momento para posiciones a largo plazo',
    'cycleScore.earlyBull': 'Bull temprano',
    'cycleScore.earlyBullDesc': 'el ciclo alcista esta comenzando, tendencia favorable',
    'cycleScore.midBull': 'Bull medio',
    'cycleScore.midBullDesc': 'ciclo madurando, mantener posiciones pero vigilar cambios',
    'cycleScore.lateBull': 'Bull tardio',
    'cycleScore.lateBullDesc': 'riesgo creciente, considerar reducir exposicion gradualmente',
    'cycleScore.distribution': 'Zona de distribucion',
    'cycleScore.distributionDesc': 'alto riesgo, smart money probablemente vendiendo',
    'cycleScore.euphoria': 'Zona de euforia',
    'cycleScore.euphoriaDesc': 'riesgo extremo, el mercado esta sobrecalentado',
    'cycleScore.mostBearish': 'Componente mas bajista:',
    'cycleScore.mostBullish': 'Componente mas alcista:',
    'cycleScore.trendUp': 'Tendencia: score subiendo',
    'cycleScore.trendDown': 'Tendencia: score bajando',
    'cycleScore.ago30d': 'hace 30d:',
    'cycleScore.now': 'ahora:',

    // Risk
    'risk.title': 'Risk Analysis',
    'risk.subtitle': 'Drawdown, volatility, Sharpe, VaR',
    'risk.helpTitle': 'Analisis de Riesgo',
    'risk.currentDrawdown': 'Current Drawdown',
    'risk.maxDrawdown': 'Max Drawdown',
    'risk.vol30d': 'Vol 30D (Ann.)',
    'risk.sharpe': 'Sharpe (365D)',
    'risk.var95': 'VaR 95%',
    'risk.daily': 'daily',
    'risk.drawdownChart': 'Drawdown Chart',
    'risk.drawdown': 'Drawdown',
    'risk.minimalDD': 'Drawdown minimo',
    'risk.minimalDDDesc': 'BTC cerca de maximos, tendencia fuerte',
    'risk.moderateDD': 'Drawdown moderado',
    'risk.moderateDDDesc': 'correccion saludable dentro de tendencia',
    'risk.significantDD': 'Drawdown significativo',
    'risk.significantDDDesc': 'correccion profunda, posible cambio de tendencia',
    'risk.severeDD': 'Drawdown severo',
    'risk.severeDDDesc': 'mercado en fase bajista, extrema precaucion',
    'risk.lowVol': 'Volatilidad baja',
    'risk.lowVolDesc': 'mercado estable, posible acumulacion',
    'risk.medVol': 'Volatilidad media',
    'risk.medVolDesc': 'niveles normales para BTC',
    'risk.highVol': 'Volatilidad alta',
    'risk.highVolDesc': 'mercado inestable, mayor riesgo en operaciones',
    'risk.sharpeExcellent': 'Sharpe ratio excelente',
    'risk.sharpeExcellentDesc': 'retornos excepcionales ajustados por riesgo',
    'risk.sharpeGood': 'Sharpe ratio bueno',
    'risk.sharpeGoodDesc': 'retornos positivos con riesgo aceptable',
    'risk.sharpeLow': 'Sharpe ratio bajo',
    'risk.sharpeLowDesc': 'retornos positivos pero con alto riesgo',
    'risk.sharpeNeg': 'Sharpe ratio negativo',
    'risk.sharpeNegDesc': 'perdidas netas, entorno desfavorable',
    'risk.varExplain': 'VaR 95%: en un dia malo (5% de probabilidad), la perdida podria ser de',
    'risk.orMore': 'o mas',

    // Alerts
    'alerts.title': 'Alerts',
    'alerts.helpTitle': 'Sistema de Alertas',
    'alerts.noAlerts': 'No active alerts',
    'alerts.type': 'Type:',
    'alerts.signal': 'Signal:',

    // Conclusions
    'conclusions.title': 'Conclusions',
    'conclusions.subtitle': 'Intelligence journal',
    'conclusions.helpTitle': 'Sistema de Conclusiones',
    'conclusions.accuracy': 'accuracy',
    'conclusions.validated': 'validated',
    'conclusions.all': 'all',
    'conclusions.noData': 'No conclusions',
    'conclusions.correct': 'correct',
    'conclusions.incorrect': 'incorrect',
    'conclusions.partial': 'partial',

    // Reports
    'reports.title': 'Reports',
    'reports.subtitle': 'reports generated',
    'reports.helpTitle': 'Informes Generados',
    'reports.noData': 'No reports',
    'reports.report': 'report',
    'reports.selectReport': 'Selecciona un informe de la lista para ver su contenido completo',
    'reports.aiBadge': 'AI',

    // Nav extras
    'nav.portfolio': 'Portfolio',
    'nav.info': 'Info',

    // Header live
    'header.live': 'en vivo',
    'header.delayed': 'diferido',

    // Info page
    'info.title': 'Informacion',
    'info.subtitle': 'Acerca de BTC Intelligence Hub',
    'info.whatTitle': '¿Que es BTC Intelligence Hub?',
    'info.whatDescription': 'BTC Intelligence Hub es un centro de inteligencia personal para Bitcoin. Agrega datos de multiples fuentes (on-chain, tecnicos, macro, sentimiento), los analiza automaticamente cada hora, y genera señales de trading con niveles TP/SL por timeframe. Todo 100% automatizado con GitHub Actions y visualizado en un dashboard en tiempo real.',
    'info.sectionOverview': 'Secciones del Dashboard',
    'info.section.overview.title': 'Overview',
    'info.section.overview.desc': 'Panel principal con precio, Cycle Score, Fear & Greed y señales de trading.',
    'info.section.trading.title': 'Trading',
    'info.section.trading.desc': 'Recomendaciones LONG/SHORT/NEUTRAL por timeframe con TP/SL y tesis de entrada.',
    'info.section.technical.title': 'Technical',
    'info.section.technical.desc': 'RSI, MACD, Medias Moviles (EMA 21, SMA 50/200), Bollinger Bands.',
    'info.section.onchain.title': 'On-Chain',
    'info.section.onchain.desc': 'Hash Rate, NVT Ratio, Funding Rate, Open Interest y salud de la red.',
    'info.section.macro.title': 'Macro',
    'info.section.macro.desc': 'Correlaciones BTC con S&P500, Oro, Dolar (DXY), Bonos 10Y.',
    'info.section.sentiment.title': 'Sentiment',
    'info.section.sentiment.desc': 'Indice Fear & Greed con media 30D y deteccion de divergencias.',
    'info.section.cycles.title': 'Cycles',
    'info.section.cycles.desc': 'Halvings, ciclos bull/bear, proyecciones basadas en promedios historicos.',
    'info.section.risk.title': 'Risk',
    'info.section.risk.desc': 'Drawdown, volatilidad, Sharpe Ratio, VaR 95%.',
    'info.section.reports.title': 'Reports',
    'info.section.reports.desc': 'Informes diarios y semanales generados automaticamente.',
    'info.sourcesTitle': 'Fuentes de Datos',
    'info.source.binance': 'Binance — Precios BTC/USDT en tiempo real (WebSocket) y datos de derivados (Funding Rate, Open Interest)',
    'info.source.coingecko': 'CoinGecko — Precios historicos, datos de mercado',
    'info.source.alternative': 'Alternative.me — Indice Fear & Greed',
    'info.source.fred': 'FRED (Federal Reserve) — Datos macro (DXY, bonos, tipos)',
    'info.source.blockchain': 'Blockchain.com — Metricas on-chain (hash rate, transacciones)',
    'info.frequencyTitle': 'Frecuencia de Actualizacion',
    'info.freq.prices.label': 'Precios BTC',
    'info.freq.prices.value': 'Cada hora + tiempo real (WS)',
    'info.freq.indicators.label': 'Indicadores tecnicos',
    'info.freq.indicators.value': 'Cada hora',
    'info.freq.onchain.label': 'Datos on-chain',
    'info.freq.onchain.value': 'Cada hora',
    'info.freq.sentiment.label': 'Sentimiento',
    'info.freq.sentiment.value': 'Cada hora',
    'info.disclaimerTitle': 'Disclaimer',
    'info.disclaimer1': 'BTC Intelligence Hub es una herramienta de analisis e informacion. NO proporciona consejo financiero, de inversion o de trading.',
    'info.disclaimer2': 'Las señales de trading, niveles TP/SL y recomendaciones son orientativas y se basan en indicadores tecnicos. El rendimiento pasado no garantiza resultados futuros.',
    'info.disclaimer3': 'Opera siempre bajo tu propio criterio y gestion de riesgo. Nunca inviertas mas de lo que puedes permitirte perder.',

    // On-Chain extras (Derivatives)
    'onchain.fundingRate': 'Funding Rate',
    'onchain.openInterest': 'Open Interest',
    'onchain.fundingRateChart': 'Funding Rate (historico)',
    'onchain.frPositive': 'Funding positivo: los longs pagan a los shorts, mayoria del mercado esta largo',
    'onchain.frNegative': 'Funding negativo: los shorts pagan a los longs, mayoria del mercado esta corto',
    'onchain.frExtreme': 'Funding rate extremo: historicamente precede reversiones (señal contrarian)',
    'onchain.frNeutral': 'Funding rate neutral: sin presion significativa de apalancamiento',
    'onchain.oiHigh': 'Open Interest elevado vs media 30D: alto apalancamiento en el mercado, mayor riesgo de liquidaciones',
    'onchain.oiLow': 'Open Interest bajo vs media 30D: poco apalancamiento, movimientos potencialmente mas organicos',
    'onchain.oiNormal': 'Open Interest en rango normal vs media 30D',

    // Level Map
    'trading.levelMap': 'Mapa de Niveles — S/R + Fibonacci + Volumen',

    // Backtesting / Signal History
    'trading.signalAccuracy': 'Precision de Señales',
    'trading.winRate': 'Win Rate',
    'trading.totalSignals': 'Total Señales',
    'trading.avgConfidence': 'Confianza Media',
    'trading.correct': 'Correctas',
    'trading.incorrect': 'Incorrectas',
    'trading.pending': 'Pendientes',
    'trading.noHistory': 'Aun no hay historico de señales. Se generara automaticamente.',
    'trading.last30d': 'Ultimos 30 dias',
    'trading.timeframe': 'Timeframe',
    'trading.winRateLabel': 'Win Rate',
    'trading.total': 'Total',

    // v2 Extended scoring
    'trading.extendedScore': 'Score Extendido',
    'trading.baseScore': 'Base',
    'trading.bonusLevels': 'Niveles',
    'trading.bonusCandles': 'Velas',
    'trading.bonusOnchain': 'On-Chain',
    'trading.penaltiesLabel': 'Penalizaciones',
    'trading.classificationLabel': 'Clasificacion',
    'trading.setupType': 'Setup',
    'trading.candlePatternLabel': 'Patron',

    // v2 Structural analysis
    'trading.srLevels': 'Niveles S/R',
    'trading.strongLevel': 'Gran nivel S/R en',
    'trading.nearestLevel': 'Nivel mas cercano',
    'trading.outOfRange': 'fuera del rango de bonus',
    'trading.noLevelsAvailable': 'Sin niveles S/R disponibles',
    'trading.psychLevel': 'Nivel psicologico',
    'trading.noFibData': 'Sin datos Fibonacci disponibles',
    'trading.nearestFib': 'Fib mas cercano',
    'trading.confluenceZone': 'Zona confluencia en',
    'trading.nearestConfluence': 'Confluencia mas cercana',
    'trading.penaltyReasons': 'Razones de Penalizacion',
    'trading.penNoLevels': 'Sin niveles fuertes (str>=6) dentro de 2%',
    'trading.penAgainstHTF': 'Contra tendencia HTF',
    'trading.penOverextended': 'Sobreextendido de EMA 21',
    'trading.penEuphoria': 'euforia extrema',
    'trading.penExtremeFear': 'miedo extremo',

    // Signal explanations for new indicators
    'sig.fr.extremeBullish': 'funding extremo negativo — fuerte señal contrarian alcista',
    'sig.fr.bullish': 'funding negativo — contrarian alcista',
    'sig.fr.bearish': 'funding positivo — exceso de longs apalancados',
    'sig.fr.extremeBearish': 'funding extremo positivo — contrarian bajista',
    'sig.fr.neutral': 'funding neutral, sin presion de apalancamiento',
    'sig.oi.bullish': 'OI bajo — mercado organico, menor riesgo de liquidaciones',
    'sig.oi.bearish': 'OI alto — alto apalancamiento, riesgo de liquidaciones',
    'sig.oi.neutral': 'OI en niveles normales',

    // Portfolio
    'portfolio.title': 'Portfolio',
    'portfolio.subtitle': 'Gestiona tus posiciones',
    'portfolio.openPositions': 'Posiciones Abiertas',
    'portfolio.closedPositions': 'Historial',
    'portfolio.newPosition': 'Nueva Posicion',
    'portfolio.direction': 'Direccion',
    'portfolio.entryPrice': 'Precio entrada',
    'portfolio.size': 'Tamaño (BTC)',
    'portfolio.stopLoss': 'Stop Loss',
    'portfolio.takeProfit1': 'Take Profit 1',
    'portfolio.takeProfit2': 'Take Profit 2',
    'portfolio.open': 'Abrir posicion',
    'portfolio.close': 'Cerrar',
    'portfolio.pnl': 'PnL',
    'portfolio.pnlPercent': 'PnL %',
    'portfolio.status': 'Estado',
    'portfolio.noPositions': 'No hay posiciones abiertas',
    'portfolio.noHistory': 'No hay historial de posiciones',
    'portfolio.stats': 'Estadisticas',
    'portfolio.totalPnl': 'PnL Total',
    'portfolio.winRate': 'Win Rate',
    'portfolio.totalTrades': 'Total Trades',
    'portfolio.avgPnl': 'PnL Promedio',
    'portfolio.long': 'LONG',
    'portfolio.short': 'SHORT',
    'portfolio.notes': 'Notas',
  },
  en: {
    // Nav
    'nav.overview': 'Overview',
    'nav.trading': 'Trading',
    'nav.cycles': 'Cycles',
    'nav.technical': 'Technical',
    'nav.onchain': 'On-Chain',
    'nav.macro': 'Macro',
    'nav.sentiment': 'Sentiment',
    'nav.cycleScore': 'Cycle Score',
    'nav.risk': 'Risk',
    'nav.alerts': 'Alerts',
    'nav.conclusions': 'Conclusions',
    'nav.reports': 'Reports',

    // Common
    'common.noData': 'No data available',
    'common.error': 'Something went wrong',
    'common.errorMsg': 'An unexpected error occurred while rendering this page.',
    'common.tryAgain': 'Try again',
    'common.interpretation': 'Interpretation',
    'common.days': 'days',
    'common.ongoing': 'ongoing',
    'common.activeAlerts': 'active alerts',

    // Header
    'header.title': 'Bitcoin Intelligence Center',
    'header.titleShort': 'BTC Intel',

    // Overview
    'overview.title': 'Overview',
    'overview.subtitle': 'BTC Intelligence Hub',
    'overview.helpTitle': 'Overview - General View',
    'overview.btcPrice': 'BTC Price',
    'overview.cycleScore': 'Cycle Score',
    'overview.fearGreed': 'Fear & Greed',
    'overview.alerts': 'Alerts',
    'overview.conclusions': 'Conclusions',
    'overview.tradingSignal': 'Trading Signal',
    'overview.seeDetail': 'See full details',
    'overview.extremeFear': 'Extreme Fear',
    'overview.fear': 'Fear',
    'overview.neutral': 'Neutral',
    'overview.greed': 'Greed',
    'overview.extremeGreed': 'Extreme Greed',

    // Phase labels
    'phase.capitulation': 'CAPITULATION',
    'phase.accumulation': 'ACCUMULATION',
    'phase.early_bull': 'EARLY BULL',
    'phase.mid_bull': 'MID BULL',
    'phase.late_bull': 'LATE BULL',
    'phase.distribution': 'DISTRIBUTION',
    'phase.euphoria': 'EUPHORIA',

    // Trading
    'trading.title': 'Trading Signal',
    'trading.subtitle': 'Recommendations by timeframe',
    'trading.currentPrice': 'Current price:',
    'trading.confidence': 'confidence',
    'trading.1H': 'Scalping / Intraday',
    'trading.4H': 'Intraday / Swing',
    'trading.1D': 'Swing / Position',
    'trading.1W': 'Position / Macro',
    'trading.bull': 'bull',
    'trading.bear': 'bear',
    'trading.flat': 'flat',
    'trading.activeSignals': 'Active Signals',
    'trading.signals': 'signals:',
    'trading.bullish': 'bullish',
    'trading.bearish': 'bearish',
    'trading.neutral': 'neutral',
    'trading.operationLevels': 'Operation Levels',
    'trading.calcBased': 'Calculated from:',
    'trading.slAdjusted': 'SL adjusted by signal confidence. Higher confidence = tighter SL.',
    'trading.thesis': 'Entry Thesis',
    'trading.why': 'Why',
    'trading.when': 'When to enter?',
    'trading.risks': 'Key Risks',
    'trading.reasoning': 'Reasoning',
    'trading.indicator': 'Indicator',
    'trading.value': 'Value',
    'trading.signal': 'Signal',
    'trading.weight': 'Weight',
    'trading.impact': 'Impact',
    'trading.contrib': 'Contrib.',
    'trading.score': 'Score:',
    'trading.disclaimer': '* TP/SL levels are indicative, calculated with ATR and Bollinger Bands. Not financial advice. Manage your risk.',

    // Trading thesis dynamic
    'trading.mixedSignals': 'Market shows mixed signals with',
    'trading.bullishIndicators': 'bullish indicators and',
    'trading.bearishIndicators': 'bearish.',
    'trading.noClearBias': 'No clear bias to recommend a direction. Final score:',
    'trading.stayOut': 'Stay on the sidelines or wait for confirmation before trading.',
    'trading.indicatorsAnalyzed': 'indicators analyzed:',
    'trading.mainSignal': 'Main signal:',
    'trading.contributes': 'contributes',
    'trading.toScore': 'to score.',
    'trading.rsiOversold': 'indicates oversold — historically precedes bounces.',
    'trading.rsiOverbought': 'indicates overbought — historically precedes corrections.',
    'trading.priceAboveEma': 'above EMA 21',
    'trading.emaSupportActive': '— active dynamic support in favor.',
    'trading.priceBelowEma': 'below EMA 21',
    'trading.emaResistance': '— EMA acts as resistance to overcome.',
    'trading.emaResistanceBearish': '— dynamic resistance confirming bearish pressure.',
    'trading.emaSupportBreak': '— support that must break to confirm SHORT.',
    'trading.csAccumulation': '(accumulation) — historically favorable phase for medium-long term buys.',
    'trading.csDistribution': '(distribution) — advanced cycle phase, caution recommended.',
    'trading.counterSignals': 'Counter signals:',
    'trading.entryAggressive': 'Entry at current price',
    'trading.highConfidence': '— high confidence',
    'trading.signalClear': 'signal is clear enough.',
    'trading.entryModerate': 'Moderate entry at current price',
    'trading.mediumConfidence': '— medium confidence',
    'trading.reducedSize': 'consider reduced position size.',
    'trading.weakSignal': 'Weak signal',
    'trading.waitConfirmation': '— wait for additional confirmation before entering.',
    'trading.conservativeBreakAbove': 'Conservative entry: wait for price to break above EMA 21',
    'trading.asBullishConfirmation': 'as bullish confirmation.',
    'trading.emaSupportNear': 'as nearby support — favorable entry if it holds.',
    'trading.conservativeBreakBelow': 'Conservative entry: wait for price to break below EMA 21',
    'trading.asBearishConfirmation': 'as bearish confirmation.',
    'trading.emaResistanceNear': 'as nearby resistance — favorable entry if rejected.',
    'trading.rsiExtremeOversold': 'RSI in extreme oversold zone — aggressive entry justified by bounce statistics.',
    'trading.rsiExtremeOverbought': 'RSI in extreme overbought zone — aggressive short entry justified.',
    'trading.slInvalidates': '— if this level is lost, the thesis is invalidated.',
    'trading.fgExtremeFear': 'Fear & Greed in extreme fear — further downside possible before bounce (capitulation).',
    'trading.fgExtremeGreed': 'Fear & Greed in extreme greed — market vulnerable to correction from excess optimism.',
    'trading.hrDecline': 'Hash Rate declining — miners may be selling, additional bearish pressure.',
    'trading.nvtHigh': 'NVT elevated — network may be overvalued relative to actual use.',
    'trading.lowConfidence': 'Low confidence',
    'trading.ambiguousSignals': '— ambiguous signals, high risk of false positive.',
    'trading.counterIndicators': 'counter indicators — possible divergence, watch closely.',
    'trading.noRisks': 'No notable risk factors for this signal.',

    // Signal explanations
    'sig.rsi.extremeBullish': 'extreme oversold, high bounce probability',
    'sig.rsi.bullish': 'oversold zone, buying momentum',
    'sig.rsi.bearish': 'overbought zone, selling pressure',
    'sig.rsi.extremeBearish': 'extreme overbought, high correction risk',
    'sig.rsi.neutral': 'neutral zone, no clear bias',
    'sig.macd.bullish': 'positive histogram, growing bullish momentum',
    'sig.macd.bearish': 'negative histogram, bearish momentum',
    'sig.macd.neutral': 'no clear cross, flat momentum',
    'sig.sma.bullish': 'fast MA above slow (golden cross), bullish trend',
    'sig.sma.bearish': 'fast MA below slow (death cross), bearish trend',
    'sig.sma.neutral': 'MAs converging, no clear direction',
    'sig.bb.bullish': 'price near lower band, possible bounce',
    'sig.bb.bearish': 'price near upper band, possible rejection',
    'sig.bb.neutral': 'price centered in bands',
    'sig.ema.extremeBullish': 'price well above, strong bullish trend',
    'sig.ema.bullish': 'price above EMA, active dynamic support',
    'sig.ema.bearish': 'price below EMA, active dynamic resistance',
    'sig.ema.extremeBearish': 'price well below, strong bearish trend',
    'sig.ema.neutral': 'price at EMA, decision zone',
    'sig.fg.extremeBullish': 'extreme greed (contrarian: caution)',
    'sig.fg.bullish': 'moderate greed',
    'sig.fg.bearish': 'fear (contrarian: opportunity)',
    'sig.fg.extremeBearish': 'extreme fear (contrarian: strong buy opportunity)',
    'sig.fg.neutral': 'neutral sentiment',
    'sig.hr.bullish': 'miners accumulating, healthy network',
    'sig.hr.bearish': 'miners capitulating, possible sell pressure',
    'sig.hr.neutral': 'Hash Rate stable — no significant network changes',
    'sig.nvt.bullish': 'network undervalued relative to transactions',
    'sig.nvt.bearish': 'network overvalued, possible bubble',
    'sig.nvt.neutral': 'valuation in line with network usage',
    'sig.cs.bullish': 'early cycle phase, high upside potential',
    'sig.cs.bearish': 'advanced cycle phase, growing risk',
    'sig.cs.neutral': 'mid-cycle, balanced risk/reward',

    // Technical
    'technical.title': 'Technical Analysis',
    'technical.subtitle': 'Technical indicators and signals',
    'technical.helpTitle': 'Technical Analysis',
    'technical.priceMA': 'BTC Price + Moving Averages',
    'technical.rsi': 'RSI (14)',
    'technical.macd': 'MACD (12, 26, 9)',
    'technical.macdLine': 'MACD',
    'technical.signalLine': 'Signal',
    'technical.histogram': 'Histogram',
    'technical.bullishCross': 'Bullish cross',
    'technical.bearishCross': 'Bearish cross',
    'technical.rsiOverbought': 'possible short-term correction',
    'technical.rsiOversold': 'possible short-term bounce',
    'technical.rsiBullZone': 'positive momentum',
    'technical.rsiBearZone': 'weak momentum',
    'technical.macdPosBullish': 'bullish momentum',
    'technical.macdNegBearish': 'bearish momentum',
    'technical.lastMacdCross': 'Last MACD cross:',
    'technical.bullishMacdCross': 'bullish (MACD crosses above signal)',
    'technical.bearishMacdCross': 'bearish (MACD crosses below signal)',
    'technical.priceNearEma': 'possible dynamic support/resistance',
    'technical.priceAboveEma': 'above EMA 21',
    'technical.priceBelowEma': 'below EMA 21',
    'technical.smaAbove': 'above SMA 200',
    'technical.smaBelow': 'below SMA 200',
    'technical.structureBullish': 'bullish structure',
    'technical.structureBearish': 'bearish structure',
    'technical.goldenCross': 'Golden Cross active (SMA50 > SMA200): long-term bullish trend',
    'technical.deathCross': 'Death Cross active (SMA50 < SMA200): long-term bearish trend',
    'technical.smaConverging': 'SMAs converging: possible trend change',

    // Technical v2 — overlays & new sections
    'technical.overlays': 'Overlays',
    'technical.overlay.emas': 'EMAs/SMAs',
    'technical.overlay.bb': 'Bollinger',
    'technical.overlay.sr': 'S/R',
    'technical.overlay.fib': 'Fibonacci',
    'technical.overlay.patterns': 'Patterns',
    'technical.overlay.volume': 'Volume',
    'technical.timeframe': 'Timeframe',
    'technical.range': 'Range',
    'technical.candlestick': 'Candlestick Chart + Overlays',
    'technical.levelMap': 'Level Map',
    'technical.resistances': 'RESISTANCES',
    'technical.supports': 'SUPPORTS',
    'technical.currentPrice': 'CURRENT PRICE',
    'technical.levelScore': 'score',
    'technical.roleFlip': 'Role Flip',
    'technical.psychological': 'Psychological',
    'technical.fibonacci': 'Fibonacci',
    'technical.highVolume': 'High Volume',
    'technical.confluenceZones': 'Confluence Zones',
    'technical.confluence.critical': 'CRITICAL CONFLUENCE ZONE',
    'technical.confluence.strong': 'CONFLUENCE ZONE',
    'technical.confluence.support': 'SUPPORT',
    'technical.confluence.resistance': 'RESISTANCE',
    'technical.confluence.below': 'below',
    'technical.confluence.above': 'above',
    'technical.confluence.timeframes': 'Timeframes',
    'technical.confluence.strength': 'Combined strength',
    'technical.confluence.granNivel': 'Gran Level',
    'technical.confluence.noZones': 'No active confluence zones',
    'technical.returnHeatmap': 'Monthly Return Heatmap',
    'technical.heatmap.year': 'Year',
    'technical.heatmap.avg': 'Avg',
    'technical.heatmap.noData': 'No data',
    'technical.interpretation.levels': 'S/R Levels',
    'technical.interpretation.fibonacci': 'Fibonacci',
    'technical.interpretation.confluence': 'Confluence',
    'technical.interpretation.seasonality': 'Seasonality',
    'technical.interpretation.summary': 'Summary',
    'technical.goldenPocket': 'Golden Pocket',
    'technical.noLevels': 'No active S/R levels',
    'technical.noFib': 'No Fibonacci data',
    'technical.noConfluence': 'No confluence zones',
    'technical.volumeSma': 'Vol SMA20',

    // Cycles
    'cycles.title': 'Cycle Analysis',
    'cycles.subtitle': 'Halvings, bull/bear markets',
    'cycles.helpTitle': 'Cycle Analysis',
    'cycles.halvingTimeline': 'Halving Timeline',
    'cycles.1st': '1st Halving',
    'cycles.2nd': '2nd Halving',
    'cycles.3rd': '3rd Halving',
    'cycles.4th': '4th Halving',
    'cycles.daySinceHalving': 'day since last halving',
    'cycles.currentCycle': 'Current Cycle',
    'cycles.daysSinceHalving': 'Days Since Halving',
    'cycles.halvingCycles': 'Halving Cycles',
    'cycles.bullBear': 'Bull/Bear',
    'cycles.daysBetweenPeaks': 'Days Between Cycle Peaks',
    'cycles.daysBetweenBottoms': 'Days Between Cycle Bottoms',
    'cycles.daysPeakToBottom': 'Days From Peak to Bottom (Drop)',
    'cycles.average': 'Average:',
    'cycles.projections': 'Projections (based on historical averages)',
    'cycles.nextBottomFromPeak': 'Next Bottom (from last peak)',
    'cycles.nextBottomFromBottom': 'Next Bottom (from last bottom)',
    'cycles.nextPeakFromPeak': 'Next Peak (from last peak)',
    'cycles.projNote': '* Projections based on averages from previous cycles. Not financial advice.',
    'cycles.allCycles': 'All Cycles',
    'cycles.name': 'Name',
    'cycles.type': 'Type',
    'cycles.start': 'Start',
    'cycles.end': 'End',
    'cycles.duration': 'Duration',
    'cycles.roi': 'ROI',
    'cycles.maxDD': 'Max DD',

    // On-Chain
    'onchain.title': 'On-Chain Metrics',
    'onchain.subtitle': 'Hash rate, NVT, network health',
    'onchain.helpTitle': 'On-Chain Metrics',
    'onchain.hashRate': 'Hash Rate',
    'onchain.hrMomentum': 'HR Momentum 30D',
    'onchain.nvtRatio': 'NVT Ratio',
    'onchain.hrMomentumChart': 'Hash Rate Momentum 30D',
    'onchain.hrGrowing': 'Hash Rate growing: network strengthening, miners optimistic',
    'onchain.hrDecreasing': 'Hash Rate decreasing: possible miner stress',
    'onchain.nvtHigh': 'NVT high (>65): network possibly overvalued relative to usage',
    'onchain.nvtLow': 'NVT low (<30): network undervalued, good value/use ratio',
    'onchain.nvtNormal': 'NVT in normal range',
    'onchain.healthyNetwork': 'Overall, on-chain metrics show a healthy and growing network',
    'onchain.weakNetwork': 'Overall, on-chain metrics show signs of network weakness',
    'onchain.mixedSignals': 'On-chain metrics show mixed signals, no clear trend',

    // Macro
    'macro.title': 'Macro Analysis',
    'macro.subtitle': 'BTC correlations with traditional assets',
    'macro.helpTitle': 'Macro Analysis',
    'macro.btcSpx': 'BTC vs SPX',
    'macro.btcGold': 'BTC vs GOLD',
    'macro.btcDxy': 'BTC vs DXY',
    'macro.btcUs10y': 'BTC vs US_10Y',
    'macro.strong': 'strong',
    'macro.weak': 'weak',
    'macro.correlationMatrix': 'Correlation Matrix (30D)',
    'macro.highCorrelationSpx': 'High correlation with S&P500',
    'macro.btcRiskAsset': 'BTC behaving as a risk asset',
    'macro.lowCorrelationSpx': 'Low correlation with S&P500: BTC acting independently from traditional market',
    'macro.negCorrelationDxy': 'Negative correlation with dollar',
    'macro.weakDollarFavorsBtc': 'dollar weakness favors BTC',
    'macro.posCorrelationDxy': 'Unusual positive correlation with dollar: atypical move',
    'macro.highCorrelationGold': 'High correlation with gold: BTC acting as store of value',
    'macro.noData': 'Not enough macro data to generate interpretation',
    'macro.favorable': 'Favorable macro environment: BTC shows independence and/or acts as store of value',
    'macro.unfavorable': 'Unfavorable macro environment: atypical correlations suggest caution',
    'macro.mixed': 'Mixed macro environment: correlations show no dominant clear trend',

    // Sentiment
    'sentiment.title': 'Sentiment Analysis',
    'sentiment.subtitle': 'Fear & Greed Index',
    'sentiment.helpTitle': 'Sentiment Analysis',
    'sentiment.fearGreed': 'Fear & Greed',
    'sentiment.avg30d': '30D Average',
    'sentiment.zone': 'Zone',
    'sentiment.divergence': 'Divergence',
    'sentiment.vsAvg': 'vs 30D avg',
    'sentiment.history': 'Fear & Greed History',
    'sentiment.extremeFear': 'Extreme Fear',
    'sentiment.fear': 'Fear',
    'sentiment.neutral': 'Neutral',
    'sentiment.greed': 'Greed',
    'sentiment.extremeGreed': 'Extreme Greed',
    'sentiment.insightExtremeFear': 'Extreme Fear: historically, the best buying opportunities occur at these levels',
    'sentiment.insightFear': 'Fear zone: market is fearful, possible contrarian opportunity',
    'sentiment.insightExtremeGreed': 'Extreme Greed: caution, market is euphoric. Historically precedes corrections',
    'sentiment.insightGreed': 'Greed zone: optimism is high, consider taking partial profits',
    'sentiment.insightNeutral': 'Neutral sentiment: market shows no extreme bias',
    'sentiment.insightDivergence': 'Significant divergence between current sentiment and 30-day average: possible trend change',

    // CycleScore
    'cycleScore.title': 'Cycle Score',
    'cycleScore.subtitle': 'Composite indicator 0-100',
    'cycleScore.helpTitle': 'Cycle Score - Cycle Indicator',
    'cycleScore.score': 'Score',
    'cycleScore.phase': 'Phase',
    'cycleScore.components': 'Components',
    'cycleScore.activeInputs': 'active inputs',
    'cycleScore.date': 'Date',
    'cycleScore.componentBreakdown': 'Component Breakdown',
    'cycleScore.smaPosition': 'SMA Position',
    'cycleScore.pricePosition': 'Price Position',
    'cycleScore.halving': 'Halving',
    'cycleScore.rsiMonthly': 'RSI Monthly',
    'cycleScore.hashRateMom': 'Hash Rate Mom',
    'cycleScore.fearGreed': 'Fear & Greed',
    'cycleScore.fg30d': 'F&G 30D',
    'cycleScore.history': 'Score History (90d)',
    'cycleScore.capitulation': 'Score in capitulation zone',
    'cycleScore.capitulationDesc': 'historically the best long-term accumulation zone',
    'cycleScore.accumulation': 'Accumulation zone',
    'cycleScore.accumulationDesc': 'low risk, good time for long-term positions',
    'cycleScore.earlyBull': 'Early bull',
    'cycleScore.earlyBullDesc': 'bullish cycle starting, favorable trend',
    'cycleScore.midBull': 'Mid bull',
    'cycleScore.midBullDesc': 'cycle maturing, hold positions but watch for changes',
    'cycleScore.lateBull': 'Late bull',
    'cycleScore.lateBullDesc': 'growing risk, consider gradually reducing exposure',
    'cycleScore.distribution': 'Distribution zone',
    'cycleScore.distributionDesc': 'high risk, smart money probably selling',
    'cycleScore.euphoria': 'Euphoria zone',
    'cycleScore.euphoriaDesc': 'extreme risk, market is overheated',
    'cycleScore.mostBearish': 'Most bearish component:',
    'cycleScore.mostBullish': 'Most bullish component:',
    'cycleScore.trendUp': 'Trend: score rising',
    'cycleScore.trendDown': 'Trend: score falling',
    'cycleScore.ago30d': '30d ago:',
    'cycleScore.now': 'now:',

    // Risk
    'risk.title': 'Risk Analysis',
    'risk.subtitle': 'Drawdown, volatility, Sharpe, VaR',
    'risk.helpTitle': 'Risk Analysis',
    'risk.currentDrawdown': 'Current Drawdown',
    'risk.maxDrawdown': 'Max Drawdown',
    'risk.vol30d': 'Vol 30D (Ann.)',
    'risk.sharpe': 'Sharpe (365D)',
    'risk.var95': 'VaR 95%',
    'risk.daily': 'daily',
    'risk.drawdownChart': 'Drawdown Chart',
    'risk.drawdown': 'Drawdown',
    'risk.minimalDD': 'Minimal drawdown',
    'risk.minimalDDDesc': 'BTC near highs, strong trend',
    'risk.moderateDD': 'Moderate drawdown',
    'risk.moderateDDDesc': 'healthy correction within trend',
    'risk.significantDD': 'Significant drawdown',
    'risk.significantDDDesc': 'deep correction, possible trend change',
    'risk.severeDD': 'Severe drawdown',
    'risk.severeDDDesc': 'market in bear phase, extreme caution',
    'risk.lowVol': 'Low volatility',
    'risk.lowVolDesc': 'stable market, possible accumulation',
    'risk.medVol': 'Medium volatility',
    'risk.medVolDesc': 'normal levels for BTC',
    'risk.highVol': 'High volatility',
    'risk.highVolDesc': 'unstable market, higher trading risk',
    'risk.sharpeExcellent': 'Excellent Sharpe ratio',
    'risk.sharpeExcellentDesc': 'exceptional risk-adjusted returns',
    'risk.sharpeGood': 'Good Sharpe ratio',
    'risk.sharpeGoodDesc': 'positive returns with acceptable risk',
    'risk.sharpeLow': 'Low Sharpe ratio',
    'risk.sharpeLowDesc': 'positive returns but high risk',
    'risk.sharpeNeg': 'Negative Sharpe ratio',
    'risk.sharpeNegDesc': 'net losses, unfavorable environment',
    'risk.varExplain': 'VaR 95%: on a bad day (5% probability), loss could be',
    'risk.orMore': 'or more',

    // Alerts
    'alerts.title': 'Alerts',
    'alerts.helpTitle': 'Alert System',
    'alerts.noAlerts': 'No active alerts',
    'alerts.type': 'Type:',
    'alerts.signal': 'Signal:',

    // Conclusions
    'conclusions.title': 'Conclusions',
    'conclusions.subtitle': 'Intelligence journal',
    'conclusions.helpTitle': 'Conclusions System',
    'conclusions.accuracy': 'accuracy',
    'conclusions.validated': 'validated',
    'conclusions.all': 'all',
    'conclusions.noData': 'No conclusions',
    'conclusions.correct': 'correct',
    'conclusions.incorrect': 'incorrect',
    'conclusions.partial': 'partial',

    // Reports
    'reports.title': 'Reports',
    'reports.subtitle': 'reports generated',
    'reports.helpTitle': 'Generated Reports',
    'reports.noData': 'No reports',
    'reports.report': 'report',
    'reports.selectReport': 'Select a report from the list to view its full content',
    'reports.aiBadge': 'AI',

    // Nav extras
    'nav.portfolio': 'Portfolio',
    'nav.info': 'Info',

    // Header live
    'header.live': 'live',
    'header.delayed': 'delayed',

    // Info page
    'info.title': 'Info',
    'info.subtitle': 'About BTC Intelligence Hub',
    'info.whatTitle': 'What is BTC Intelligence Hub?',
    'info.whatDescription': 'BTC Intelligence Hub is a personal Bitcoin intelligence center. It aggregates data from multiple sources (on-chain, technical, macro, sentiment), automatically analyzes them hourly, and generates trading signals with TP/SL levels per timeframe. Fully automated with GitHub Actions and visualized in a real-time dashboard.',
    'info.sectionOverview': 'Dashboard Sections',
    'info.section.overview.title': 'Overview',
    'info.section.overview.desc': 'Main panel with price, Cycle Score, Fear & Greed and trading signals.',
    'info.section.trading.title': 'Trading',
    'info.section.trading.desc': 'LONG/SHORT/NEUTRAL recommendations per timeframe with TP/SL and entry thesis.',
    'info.section.technical.title': 'Technical',
    'info.section.technical.desc': 'RSI, MACD, Moving Averages (EMA 21, SMA 50/200), Bollinger Bands.',
    'info.section.onchain.title': 'On-Chain',
    'info.section.onchain.desc': 'Hash Rate, NVT Ratio, Funding Rate, Open Interest and network health.',
    'info.section.macro.title': 'Macro',
    'info.section.macro.desc': 'BTC correlations with S&P500, Gold, Dollar (DXY), 10Y Bonds.',
    'info.section.sentiment.title': 'Sentiment',
    'info.section.sentiment.desc': 'Fear & Greed Index with 30D average and divergence detection.',
    'info.section.cycles.title': 'Cycles',
    'info.section.cycles.desc': 'Halvings, bull/bear cycles, projections based on historical averages.',
    'info.section.risk.title': 'Risk',
    'info.section.risk.desc': 'Drawdown, volatility, Sharpe Ratio, VaR 95%.',
    'info.section.reports.title': 'Reports',
    'info.section.reports.desc': 'Daily and weekly reports generated automatically.',
    'info.sourcesTitle': 'Data Sources',
    'info.source.binance': 'Binance — Real-time BTC/USDT prices (WebSocket) and derivatives data (Funding Rate, Open Interest)',
    'info.source.coingecko': 'CoinGecko — Historical prices, market data',
    'info.source.alternative': 'Alternative.me — Fear & Greed Index',
    'info.source.fred': 'FRED (Federal Reserve) — Macro data (DXY, bonds, rates)',
    'info.source.blockchain': 'Blockchain.com — On-chain metrics (hash rate, transactions)',
    'info.frequencyTitle': 'Update Frequency',
    'info.freq.prices.label': 'BTC Prices',
    'info.freq.prices.value': 'Hourly + real-time (WS)',
    'info.freq.indicators.label': 'Technical indicators',
    'info.freq.indicators.value': 'Hourly',
    'info.freq.onchain.label': 'On-chain data',
    'info.freq.onchain.value': 'Hourly',
    'info.freq.sentiment.label': 'Sentiment',
    'info.freq.sentiment.value': 'Hourly',
    'info.disclaimerTitle': 'Disclaimer',
    'info.disclaimer1': 'BTC Intelligence Hub is an analysis and information tool. It does NOT provide financial, investment or trading advice.',
    'info.disclaimer2': 'Trading signals, TP/SL levels and recommendations are indicative and based on technical indicators. Past performance does not guarantee future results.',
    'info.disclaimer3': 'Always trade with your own judgment and risk management. Never invest more than you can afford to lose.',

    // On-Chain extras (Derivatives)
    'onchain.fundingRate': 'Funding Rate',
    'onchain.openInterest': 'Open Interest',
    'onchain.fundingRateChart': 'Funding Rate (history)',
    'onchain.frPositive': 'Positive funding: longs pay shorts, majority of market is long',
    'onchain.frNegative': 'Negative funding: shorts pay longs, majority of market is short',
    'onchain.frExtreme': 'Extreme funding rate: historically precedes reversals (contrarian signal)',
    'onchain.frNeutral': 'Neutral funding rate: no significant leverage pressure',
    'onchain.oiHigh': 'Open Interest high vs 30D avg: high leverage in market, greater liquidation risk',
    'onchain.oiLow': 'Open Interest low vs 30D avg: low leverage, potentially more organic moves',
    'onchain.oiNormal': 'Open Interest in normal range vs 30D avg',

    // Level Map
    'trading.levelMap': 'Level Map — S/R + Fibonacci + Volume',

    // Backtesting / Signal History
    'trading.signalAccuracy': 'Signal Accuracy',
    'trading.winRate': 'Win Rate',
    'trading.totalSignals': 'Total Signals',
    'trading.avgConfidence': 'Avg Confidence',
    'trading.correct': 'Correct',
    'trading.incorrect': 'Incorrect',
    'trading.pending': 'Pending',
    'trading.noHistory': 'No signal history yet. It will be generated automatically.',
    'trading.last30d': 'Last 30 days',
    'trading.timeframe': 'Timeframe',
    'trading.winRateLabel': 'Win Rate',
    'trading.total': 'Total',

    // v2 Extended scoring
    'trading.extendedScore': 'Extended Score',
    'trading.baseScore': 'Base',
    'trading.bonusLevels': 'Levels',
    'trading.bonusCandles': 'Candles',
    'trading.bonusOnchain': 'On-Chain',
    'trading.penaltiesLabel': 'Penalties',
    'trading.classificationLabel': 'Classification',
    'trading.setupType': 'Setup',
    'trading.candlePatternLabel': 'Pattern',

    // v2 Structural analysis
    'trading.srLevels': 'S/R Levels',
    'trading.strongLevel': 'Strong S/R level at',
    'trading.nearestLevel': 'Nearest level',
    'trading.outOfRange': 'out of bonus range',
    'trading.noLevelsAvailable': 'No S/R levels available',
    'trading.psychLevel': 'Psychological level',
    'trading.noFibData': 'No Fibonacci data available',
    'trading.nearestFib': 'Nearest Fib',
    'trading.confluenceZone': 'Confluence zone at',
    'trading.nearestConfluence': 'Nearest confluence',
    'trading.penaltyReasons': 'Penalty Reasons',
    'trading.penNoLevels': 'No strong levels (str>=6) within 2%',
    'trading.penAgainstHTF': 'Against HTF trend',
    'trading.penOverextended': 'Overextended from EMA 21',
    'trading.penEuphoria': 'extreme euphoria',
    'trading.penExtremeFear': 'extreme fear',

    // Signal explanations for new indicators
    'sig.fr.extremeBullish': 'extreme negative funding — strong contrarian bullish',
    'sig.fr.bullish': 'negative funding — contrarian bullish signal',
    'sig.fr.bearish': 'positive funding — overcrowded longs',
    'sig.fr.extremeBearish': 'extreme positive funding — contrarian bearish',
    'sig.fr.neutral': 'neutral funding, no leverage pressure',
    'sig.oi.bullish': 'low OI — organic market, less liquidation risk',
    'sig.oi.bearish': 'high OI — heavy leverage, liquidation risk',
    'sig.oi.neutral': 'normal OI levels',

    // Portfolio
    'portfolio.title': 'Portfolio',
    'portfolio.subtitle': 'Manage your positions',
    'portfolio.openPositions': 'Open Positions',
    'portfolio.closedPositions': 'History',
    'portfolio.newPosition': 'New Position',
    'portfolio.direction': 'Direction',
    'portfolio.entryPrice': 'Entry Price',
    'portfolio.size': 'Size (BTC)',
    'portfolio.stopLoss': 'Stop Loss',
    'portfolio.takeProfit1': 'Take Profit 1',
    'portfolio.takeProfit2': 'Take Profit 2',
    'portfolio.open': 'Open position',
    'portfolio.close': 'Close',
    'portfolio.pnl': 'PnL',
    'portfolio.pnlPercent': 'PnL %',
    'portfolio.status': 'Status',
    'portfolio.noPositions': 'No open positions',
    'portfolio.noHistory': 'No position history',
    'portfolio.stats': 'Statistics',
    'portfolio.totalPnl': 'Total PnL',
    'portfolio.winRate': 'Win Rate',
    'portfolio.totalTrades': 'Total Trades',
    'portfolio.avgPnl': 'Avg PnL',
    'portfolio.long': 'LONG',
    'portfolio.short': 'SHORT',
    'portfolio.notes': 'Notes',
  },
}

/* ── Help text arrays ────────────────────────────────────────── */
const H: Record<Lang, Record<string, string[]>> = {
  es: {
    overview: [
      'Panel principal con el resumen del estado actual de Bitcoin.',
      'Precio BTC: Precio actual con cambios en 24h, 7d y 30d.',
      'Cycle Score: Indicador compuesto 0-100 que mide la fase del ciclo.',
      'Fear & Greed: Indice de sentimiento (0=miedo extremo, 100=codicia extrema).',
      'Trading Signal: Resumen de recomendaciones. Ver pagina completa para detalle con TP/SL.',
      'Los datos se actualizan con: btc-intel update-data && btc-intel analyze full',
    ],
    trading: [
      'Recomendaciones LONG/SHORT/NEUTRAL por timeframe basadas en 9 indicadores ponderados (incluye EMA 21).',
      '1H: Scalping — prioriza RSI y MACD (indicadores rapidos de momentum).',
      '4H: Swing corto — equilibrio entre tecnico y sentimiento.',
      '1D: Swing/Position — incluye on-chain (NVT, Hash Rate) y ciclo.',
      '1W: Macro — maximo peso a Cycle Score, SMA Cross y fundamentales on-chain.',
      'TP1/TP2: Take Profit calculados con ATR (volatilidad) y Bollinger Bands como resistencias/soportes dinamicos.',
      'SL: Stop Loss basado en BB, SMA50/200 como soporte, o ATR si no hay soporte tecnico cercano.',
      'R:R: Ratio riesgo/recompensa. Valores > 1.5 son favorables.',
      'Mayor confianza = SL mas ajustado (la señal es mas clara, menor margen necesario).',
    ],
    technical: [
      'Indicadores tecnicos calculados sobre el precio historico de BTC.',
      'RSI (14): Relative Strength Index. Por encima de 70 = sobrecompra, por debajo de 30 = sobreventa.',
      'MACD: Linea MACD (naranja), Signal (azul), Histograma (barras). Los circulos marcan los cruces: verde=alcista, rojo=bajista.',
      'Medias Moviles: EMA 21 (cyan, corto plazo), SMA 50 (morado, medio plazo), SMA 200 (rojo, largo plazo). Actuan como soportes/resistencias dinamicas.',
      'Usa los botones 1M/3M/6M/1Y/ALL para cambiar el rango temporal de todos los graficos.',
    ],
    cycles: [
      'Historial de ciclos de Bitcoin basados en los halvings (reduccion de recompensa de mineria a la mitad cada ~4 anos).',
      'Dias entre Techos: Cuanto tiempo pasa entre cada maximo historico de ciclo.',
      'Dias entre Suelos: Cuanto tiempo pasa entre cada minimo de ciclo.',
      'Techo a Suelo: Cuanto dura la caida desde el maximo hasta el minimo. Incluye el drawdown (% de caida).',
      'Proyecciones: Estimacion del proximo techo y suelo basada en promedios de ciclos anteriores.',
      'All Cycles: Tabla con todos los ciclos, incluyendo ROI y Max Drawdown.',
    ],
    onchain: [
      'Datos directos de la blockchain de Bitcoin que muestran la salud de la red.',
      'Hash Rate: Potencia computacional de la red en Exahashes/segundo. Creciente = red segura, mineros optimistas.',
      'HR Momentum 30D: Cambio porcentual del hash rate en 30 dias. Positivo = red creciendo.',
      'NVT Ratio: Compara capitalizacion con volumen de transacciones. NVT alto = red sobrevalorada, NVT bajo = infravalorada.',
      'Estas metricas reflejan actividad REAL en la blockchain, no solo especulacion en exchanges.',
    ],
    macro: [
      'Correlaciones entre Bitcoin y activos tradicionales sobre ventanas de 30 y 90 dias.',
      'SPX (S&P 500): Correlacion positiva = BTC se mueve con las acciones.',
      'GOLD (Oro): BTC compite con el oro como "oro digital".',
      'DXY (Indice Dolar): Correlacion tipicamente NEGATIVA: dolar sube, BTC baja.',
      'US_10Y (Bono 10 años): Tipos altos presionan activos de riesgo como BTC.',
      'Valores cercanos a +1 o -1 = correlacion fuerte. Cercanos a 0 = poca relacion.',
    ],
    sentiment: [
      'El sentimiento del mercado medido por el indice Fear & Greed.',
      'Fear & Greed: 0 = Miedo Extremo (panico, posible oportunidad). 100 = Codicia Extrema (euforia, posible venta).',
      '30D Average: Media movil de 30 dias. Suaviza el ruido diario.',
      'Divergence: Diferencia entre valor actual y media de 30 dias.',
      'Historicamente, comprar en Extreme Fear y vender en Extreme Greed ha sido rentable.',
    ],
    cycleScore: [
      'Indicador compuesto que condensa multiples metricas en un numero 0-100.',
      '0 = Bottom absoluto / maxima oportunidad. 100 = Top absoluto / maximo riesgo.',
      'Fases: Capitulacion (0-14), Acumulacion (15-29), Bull Temprano (30-44), Bull Medio (45-59), Bull Tardio (60-74), Distribucion (75-84), Euforia (85-100).',
      'Componentes: SMA Position (20%), Price Position (20%), Halving (15%), RSI Mensual (10%), Hash Rate (10%), Fear & Greed (5%), F&G 30D (5%).',
      'IMPORTANTE: No es predictivo. Indica DONDE estamos en el ciclo, no donde iremos.',
    ],
    risk: [
      'Metricas de riesgo calculadas sobre el precio historico de BTC.',
      'Current Drawdown: Caida actual desde el ultimo maximo historico.',
      'Max Drawdown: Mayor caida desde maximo en el periodo.',
      'Volatilidad 30D: Cuanto varia el precio, proyectado a un año. BTC tipicamente 50-80%.',
      'Sharpe Ratio: Retorno ajustado por riesgo. >1 = bueno, negativo = perdidas.',
      'VaR 95%: Con 95% de confianza, la perdida maxima esperada en un dia.',
    ],
    alerts: [
      'Alertas automaticas generadas por el motor de deteccion de patrones y el Cycle Score.',
      'Se crean con condiciones como: Cycle Score > 85, Cycle Score < 15, patrones tecnicos significativos.',
      'Severidad: Critical (rojo), Warning (naranja), Info (azul).',
      'Signal: Cada alerta incluye una señal bullish/bearish.',
    ],
    conclusions: [
      'Diario de inteligencia con analisis y predicciones para tracking y validacion.',
      'Cada conclusion incluye: titulo, contenido, categoria, confianza (1-10), tags.',
      'Data Snapshot: Se guarda precio, Cycle Score y RSI del momento.',
      'Validacion: correct/incorrect/partial cuando se conoce el resultado.',
      'Accuracy: Precision de predicciones validadas.',
    ],
    reports: [
      'Informes completos generados automaticamente por el sistema.',
      'Tipos: daily, weekly, cycle, macro.',
      'Cada informe incluye datos de precio, indicadores, metricas on-chain y sentimiento.',
      'Selecciona un informe de la lista para ver su contenido completo.',
    ],
  },
  en: {
    overview: [
      'Main panel with a summary of the current Bitcoin status.',
      'BTC Price: Current price with 24h, 7d and 30d changes.',
      'Cycle Score: Composite indicator 0-100 measuring the cycle phase.',
      'Fear & Greed: Sentiment index (0=extreme fear, 100=extreme greed).',
      'Trading Signal: Recommendation summary. See full page for TP/SL details.',
      'Data updates with: btc-intel update-data && btc-intel analyze full',
    ],
    trading: [
      'LONG/SHORT/NEUTRAL recommendations by timeframe based on 9 weighted indicators (includes EMA 21).',
      '1H: Scalping — prioritizes RSI and MACD (fast momentum indicators).',
      '4H: Short swing — balance between technical and sentiment.',
      '1D: Swing/Position — includes on-chain (NVT, Hash Rate) and cycle.',
      '1W: Macro — max weight on Cycle Score, SMA Cross and on-chain fundamentals.',
      'TP1/TP2: Take Profit calculated with ATR (volatility) and Bollinger Bands as dynamic resistance/support.',
      'SL: Stop Loss based on BB, SMA50/200 as support, or ATR if no nearby technical support.',
      'R:R: Risk/reward ratio. Values > 1.5 are favorable.',
      'Higher confidence = tighter SL (clearer signal, less margin needed).',
    ],
    technical: [
      'Technical indicators calculated on BTC historical price.',
      'RSI (14): Relative Strength Index. Above 70 = overbought, below 30 = oversold.',
      'MACD: MACD line (orange), Signal (blue), Histogram (bars). Circles mark crosses: green=bullish, red=bearish.',
      'Moving Averages: EMA 21 (cyan, short-term), SMA 50 (purple, mid-term), SMA 200 (red, long-term). Act as dynamic support/resistance.',
      'Use 1M/3M/6M/1Y/ALL buttons to change time range for all charts.',
    ],
    cycles: [
      'Bitcoin cycle history based on halvings (mining reward halved every ~4 years).',
      'Days between Peaks: Time between each cycle all-time high.',
      'Days between Bottoms: Time between each cycle low.',
      'Peak to Bottom: Duration of the drop from peak to bottom. Includes drawdown (% drop).',
      'Projections: Estimate of next peak and bottom based on previous cycle averages.',
      'All Cycles: Table with all cycles, including ROI and Max Drawdown.',
    ],
    onchain: [
      'Direct Bitcoin blockchain data showing network health.',
      'Hash Rate: Network computational power in Exahashes/second. Growing = secure network, optimistic miners.',
      'HR Momentum 30D: Percentage change in hash rate over 30 days. Positive = network growing.',
      'NVT Ratio: Compares market cap with transaction volume. High NVT = overvalued, Low NVT = undervalued.',
      'These metrics reflect REAL blockchain activity, not just exchange speculation.',
    ],
    macro: [
      'Correlations between Bitcoin and traditional assets over 30 and 90-day windows.',
      'SPX (S&P 500): Positive correlation = BTC moves with stocks.',
      'GOLD: BTC competes with gold as "digital gold".',
      'DXY (Dollar Index): Typically NEGATIVE correlation: dollar up, BTC down.',
      'US_10Y (10-year Bond): High rates pressure risk assets like BTC.',
      'Values near +1 or -1 = strong correlation. Near 0 = little relationship.',
    ],
    sentiment: [
      'Market sentiment measured by the Fear & Greed Index.',
      'Fear & Greed: 0 = Extreme Fear (panic, possible opportunity). 100 = Extreme Greed (euphoria, possible sell).',
      '30D Average: 30-day moving average. Smooths daily noise.',
      'Divergence: Difference between current value and 30-day average.',
      'Historically, buying in Extreme Fear and selling in Extreme Greed has been profitable.',
    ],
    cycleScore: [
      'Composite indicator condensing multiple metrics into a 0-100 number.',
      '0 = Absolute bottom / max opportunity. 100 = Absolute top / max risk.',
      'Phases: Capitulation (0-14), Accumulation (15-29), Early Bull (30-44), Mid Bull (45-59), Late Bull (60-74), Distribution (75-84), Euphoria (85-100).',
      'Components: SMA Position (20%), Price Position (20%), Halving (15%), Monthly RSI (10%), Hash Rate (10%), Fear & Greed (5%), F&G 30D (5%).',
      'IMPORTANT: Not predictive. Indicates WHERE we are in the cycle, not where we\'re going.',
    ],
    risk: [
      'Risk metrics calculated on BTC historical price.',
      'Current Drawdown: Current decline from the last all-time high.',
      'Max Drawdown: Largest decline from peak in the period.',
      'Volatility 30D: Price variation annualized. BTC typically 50-80%.',
      'Sharpe Ratio: Risk-adjusted return. >1 = good, negative = losses.',
      'VaR 95%: With 95% confidence, the maximum expected daily loss.',
    ],
    alerts: [
      'Automatic alerts generated by the pattern detection engine and Cycle Score.',
      'Created with conditions like: Cycle Score > 85, Cycle Score < 15, significant technical patterns.',
      'Severity: Critical (red), Warning (orange), Info (blue).',
      'Signal: Each alert includes a bullish/bearish signal.',
    ],
    conclusions: [
      'Intelligence journal with analysis and predictions for tracking and validation.',
      'Each conclusion includes: title, content, category, confidence (1-10), tags.',
      'Data Snapshot: Saves price, Cycle Score and RSI at the time.',
      'Validation: correct/incorrect/partial when outcome is known.',
      'Accuracy: Precision of validated predictions.',
    ],
    reports: [
      'Complete reports automatically generated by the analysis system.',
      'Types: daily, weekly, cycle, macro.',
      'Each report includes price data, indicators, on-chain metrics and sentiment.',
      'Select a report from the list to view its full content.',
    ],
  },
}

/* ── Provider & Hook ─────────────────────────────────────────── */
export function I18nProvider({ children }: { children: ReactNode }) {
  const [lang, setLangRaw] = useState<Lang>(() => {
    if (typeof window === 'undefined') return 'es'
    const saved = localStorage.getItem('btc-intel-lang')
    return saved === 'en' ? 'en' : 'es'
  })

  const setLang = useCallback((l: Lang) => {
    setLangRaw(l)
    localStorage.setItem('btc-intel-lang', l)
  }, [])

  const t = useCallback(
    (key: string): string => S[lang]?.[key] ?? S.es[key] ?? key,
    [lang],
  )

  const ta = useCallback(
    (key: string): string[] => H[lang]?.[key] ?? H.es[key] ?? [],
    [lang],
  )

  return <Ctx.Provider value={{ lang, setLang, t, ta }}>{children}</Ctx.Provider>
}

export function useI18n() {
  const ctx = useContext(Ctx)
  if (!ctx) throw new Error('useI18n must be used within I18nProvider')
  return ctx
}
